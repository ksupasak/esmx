<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"><html lang="en"><head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<title>Photo Snap Shot</title>
	<meta name="generator" content="TextMate http://macromates.com/">
	<meta name="author" content="Joseph Huckaby">
	<!-- Date: 2008-03-15 -->
<script language="JavaScript">
	function timesChange(){
		url='snap.php?module='+snapmodule.value+'&id='+snapid.value+'&count=' +snapcount.value+'&timeno='+times_number.value;
		webcam.set_api_url(url);
	}
</script>
</head><body onload="document.form1.times_number.focus()" ;="" onkeypress="if (event.keyCode==107) {
webcam.snap(); }"> 
<input type="hidden" name="snapid" id="snapid" value="5"><input type="hidden" name="snapmodule" id="snapmodule" value="opt_note"><input type="hidden" name="snapcount" id="snapcount" value="3">[opt_note-5-3]<form method="post" action="" name="form1">    
	<table><tbody><tr><td valign="top">
	<div style="display:block;height:50px;">
		<label style="font-size:30px;">Photo Snap Shot</label>
		<label style="font-size:14px;color:#0000FF;margin-left:20px;">times no.</label>
		<select name="times_number" id="times_number" onchange="timesChange();" style="display:inline">
			<option value="1">#1</option>
			<option value="2">#2</option>
			<option value="3">#3</option>
		</select>
	</div>
	<!-- First, include the JPEGCam JavaScript Library -->
	<script type="text/javascript" src="webcam.js"></script>
	<script onload="document.form1.times_number.focus()"></script>
	
	<!-- Configure a few settings -->
	<script language="JavaScript">
		webcam.set_api_url( 'snap.php?module='+snapmodule.value+'&id='+snapid.value+'&count='+snapcount.value+'&timeno=1');
		webcam.set_quality( 90 ); // JPEG quality (1 - 100)
		webcam.set_shutter_sound( true ); // play shutter click sound
	</script>
	
	<!-- Next, write the movie to the page at 320x240 -->
	<script language="JavaScript">
		document.write( webcam.get_html(786, 586) );
	</script>
	<!-- Some buttons for controlling things -->
	<br>
		<input type="button" value="Configure..." onclick="webcam.configure()">
		&nbsp;&nbsp;&nbsp;
		<input type="button" value="Take Snapshot" onclick="snapcount.value=snapcount.value+1; webcam.snap();">
		&nbsp;&nbsp;&nbsp;
		<input type="button" value="Finish" onclick="opener.detail_opt_note_form.module_opt_note_process.value='detail'; opener.detail_opt_note_form.submit();  window.close();">
		<!--<input type=button value="Finish" onClick="opener.location.reload();  window.close();">-->
	
	
	<!-- Code to handle the server response (see snap.php) -->
	<script language="JavaScript">
		webcam.set_hook( 'onComplete', 'my_completion_handler' );
		
		function my_completion_handler(msg) {
			// extract URL out of PHP output
			if (msg.match(/(http\:\/\/\S+)/)) {
				var image_url = RegExp.$1;
				// show JPEG image in page
				document.getElementById('upload_results').innerHTML = 
					'<h1>Snap Successful!</h1>' + 
					'<img src="'+image_url+'">';
			}
			else alert("PHP Error: " + msg);
		}
	</script>
	
	</td><td width="50">&nbsp;</td><td valign="top">
		<div id="upload_results"></div>
	</td></tr></tbody></table>


</form></body></html>